<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <title>Healthy Barrio | Province Demographics</title>
    <link rel="icon" type="image/x-icon" href="assets/img/logo.png" />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/sidenav.css" />
    <link rel="stylesheet" href="css/bhw.css" />
  </head>

  <body class="summary">
    <div id="successNotification" class="notification"></div>
    <div id="errorNotification" class="notification"></div>

    <div class="container-fluid">
      <div class="row align-items-center mt-3">
        <!-- Left: Timestamp -->
        <div class="col-md-4 text-start">
          <h5
            class="timestamp mb-0 mt-3"
            id="currentTimestamp"
            style="font-size: 14px"
          ></h5>
        </div>

        <!-- Center: Province Name (Removed mt-3) -->
        <div class="col-md-4 text-center">
          <h5 class="province mb-0" id="province"></h5>
        </div>

        <!-- Right: Dropdown (Removed mt-3) -->
        <div class="col-md-4 text-end">
          <div class="dropdown mt-3">
            <button
              class="btn btn-primary dropdown-toggle"
              type="button"
              id="municipalityDropdownButton"
              data-bs-toggle="dropdown"
              aria-expanded="false"
              style="
                background-color: #063e4f !important;
                border-color: #063e4f !important;
              "
            >
              Select Municipality
            </button>
            <ul class="dropdown-menu" id="municipalityDropdown">
              <li>
                <span class="dropdown-item disabled"
                  >No municipalities available</span
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Vertical Card with Side Navigation -->
    <div class="dash_card vertical-card side-nav-card">
      <div class="card-body">
        <div id="layoutSidenav_nav">
          <nav class="sb-sidenav ms-2" id="sidenavAccordion">
            <div>
              <div id="barangay-container">
                <span class="bold-text"></span>
                <span id="barangay-name"></span>
                <!-- This will be updated dynamically -->
              </div>
              <img
                src="assets/img/user1.png"
                height="100px"
                width="100px"
                alt=""
              />
              <div class="fw-bold ps-2 pt-2 fs-6 pb-3" id="user_logged"></div>
              <span></span>
            </div>
            <div class="sb-sidenav-menu">
              <div class="nav">
                <a class="nav-link" href="dashboard.html">
                  <div class="sb-nav-link-icon">
                    <i class="fa-solid fa-table-columns"></i>
                  </div>
                  Dashboard
                </a>
                <div id="nav_admin_pages"></div>
                <a class="nav-link" href="citizen.html">
                  <div class="sb-nav-link-icon">
                    <i class="fa-solid fa-person"></i>
                  </div>
                  Citizens
                </a>
                <a class="nav-link" href="supplies.html">
                  <div class="sb-nav-link-icon">
                    <i class="fa-solid fa-suitcase-medical"></i>
                  </div>
                  Supplies
                </a>
                <!-- Logout link -->
                <div class="nav-item mt-auto">
                  <button id="btn_logout" class="nav-link">
                    <div class="sb-nav-link-icon ms-2 ps-1">
                      <i class="fa-solid fa-sign-out-alt"></i>
                    </div>
                    Logout
                  </button>
                </div>
              </div>
            </div>
          </nav>
        </div>
      </div>
    </div>
    <!-- End of Vertical Card with Side Navigation -->

    <div class="container-fluid">
      <!-- Demographic Information Section -->
      <div class="content_demo">
        <h5
          id="province"
          class="fw-bold text-center"
          style="font-size: 100px !important"
        ></h5>

        <div class="row g-0">
          <!-- Age Distribution Card -->
          <div class="col-md-6">
            <div
              class="card card-age shadow-sm"
              style="
                width: 100%;
                border: 2px solid #063e4f;
                border-radius: 10px;
                overflow: hidden;
              "
            >
              <div class="card-body text-center" style="padding: 20px">
                <h5
                  class="card-title mb-4"
                  style="font-size: 22px; color: #063e4f; font-weight: bold"
                >
                  Age Distribution
                </h5>

                <div class="age-container text-muted" style="font-size: 14px">
                  <div
                    class="age-group-list mb-4"
                    style="display: block; text-align: left; font-size: 16px"
                  >
                    <div><b>Infant:</b> 0</div>
                    <div><b>Toddler:</b> 0</div>
                    <div><b>Child:</b> 0</div>
                    <div><b>Teenager:</b> 0</div>
                    <div><b>Young Adult:</b> 2</div>
                    <div><b>Middle-aged Adult:</b> 1</div>
                    <div><b>Senior:</b> 0</div>
                    <div><b>Elderly:</b> 0</div>
                  </div>

                  <canvas
                    id="ageDistributionChart"
                    style="max-width: 100%"
                  ></canvas>
                </div>
              </div>
            </div>
          </div>

          <!-- Total Population, Gender Distribution -->
          <div class="col-md-6">
            <div class="card pop_card" style="border: 2px solid #063e4f">
              <h5 class="fw-bold text-center">Total Population</h5>
              <h3 class="text-center" id="totalPopulation">0</h3>
            </div>

            <div class="row g-2 mt-2" style="width: 700px">
              <div class="col-md-6">
                <div class="card male_card" style="border: 2px solid #063e4f">
                  <h5 class="fw-bold text-center">Male</h5>
                  <h3 class="text-center" id="maleCount">0</h3>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card female_card" style="border: 2px solid #063e4f">
                  <h5 class="fw-bold text-center">Female</h5>
                  <h3 class="text-center" id="femaleCount">0</h3>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Medicine and Service Availment Section -->
      <div class="row g-0 mt-3">
        <div class="col-md-6">
          <div
            class="card card-medicine"
            style="width: 700px; border: 2px solid #063e4f"
          >
            <h5 class="card-title text-center" style="font-size: 18px">
              Medicine Availment
            </h5>
            <div class="chart-container">
              <canvas id="medicineChart"></canvas>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div
            class="card bmi-summary shadow-sm"
            style="border: 2px solid #063e4f"
          >
            <h5 class="fw-bold text-center">Body Mass Index (BMI) Summary</h5>
            <div class="chart-container">
              <canvas id="bmiChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- BMI Summary Section -->
      <div class="row mt-3">
        <div class="col-md-6">
          <div
            class="card card-service"
            style="width: 700px; border: 2px solid #063e4f"
          >
            <h5 class="card-title text-center">Service Availment</h5>
            <div class="chart-container">
              <canvas id="serviceChart"></canvas>
            </div>
          </div>
        </div>

        <!-- BMI Classification -->
        <div class="col-md-6">
          <div class="row g-2 bmi-classification">
            <div class="col-md-6">
              <div
                class="card bmi-card shadow-sm"
                style="border: 2px solid #063e4f"
              >
                <h6 class="fw-bold text-muted">Underweight</h6>
                <h3 id="underweightCount" class="text-dark">0</h3>
              </div>
            </div>
            <div class="col-md-6">
              <div
                class="card bmi-card shadow-sm"
                style="border: 2px solid #063e4f"
              >
                <h6 class="fw-bold text-muted">Normal</h6>
                <h3 id="normalCount" class="text-dark">0</h3>
              </div>
            </div>
            <div class="col-md-6">
              <div
                class="card bmi-card shadow-sm"
                style="border: 2px solid #063e4f"
              >
                <h6 class="fw-bold text-muted">Overweight</h6>
                <h3 id="overweightCount" class="text-dark">0</h3>
              </div>
            </div>
            <div class="col-md-6">
              <div
                class="card bmi-card shadow-sm"
                style="border: 2px solid #063e4f"
              >
                <h6 class="fw-bold text-muted">Obese</h6>
                <h3 id="obeseCount" class="text-dark">0</h3>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      function updateTimestamp() {
        const now = new Date();
        const time = now.toLocaleTimeString();
        const date = now.toLocaleDateString(undefined, {
          year: "numeric",
          month: "long",
          day: "numeric",
        });
        document.getElementById(
          "currentTimestamp"
        ).textContent = `${date} ${time}`;
      }
      updateTimestamp();
      setInterval(updateTimestamp, 1000);
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Custom JS -->
    <script type="module" src="js/system/province_report.js" defer></script>
  </body>
</html>
